import{r as x,W as b,j as e,Y as g}from"./app-CU81j7nS.js";import{A as y,m as N}from"./AuthenticatedLayout-dRBKfQCh.js";import{P as f}from"./PrimaryButton-B91Wo0_j.js";import{n as c}from"./index-CRzonMBn.js";import{d as v}from"./index-W5QgHgs8.js";import{f as w}from"./format-Gq6E87kO.js";import"./ApplicationLogo-CKQckDiy.js";import"./transition-CyRQxhFf.js";import"./SecondaryButton-BoGYldyN.js";import"./en-US-DckgOUrT.js";const o=s=>{switch(s){case"Gold":return"bg-yellow-100 text-yellow-800 border-yellow-400";case"Silver":return"bg-gray-200 text-gray-700 border-gray-400";case"Bronze":return"bg-orange-200 text-orange-800 border-orange-400";default:return"bg-gray-100 text-gray-600 border-gray-300"}},m=({user:s,level:l=0})=>e.jsxs("div",{className:"ml-4 border-l pl-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:`text-lg font-semibold ${l===0?"text-[#cd8b76]":"text-gray-700"}`,children:s.username}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Distinction :"," ",s.distinction!=="Aucune distinction"?e.jsx("span",{className:`inline-block px-2 py-1 rounded ${o(s.distinction)}`,children:s.distinction}):e.jsx("span",{children:"Aucune distinction"})]})]}),s.downlines&&s.downlines.length>0?s.downlines.map(r=>(console.log("Downline:",r),e.jsx(m,{user:r,level:l+1},r.id||`${l}-${r.username}`))):e.jsx("span",{children:"Aucune downline"})]});function R({user:s,downlines:l,nextDistinction:r,isEligible:h,flash:n,userDistinctions:a,sponsorGains:i}){const[d,_]=x.useState(h);console.log(`User: ${s.username}`);const{post:p,processing:$,errors:k}=b(),u=t=>{p(`/network/verify-distinction/${t}`,{onSuccess:()=>{c.success("Distinction mise à jour avec succès !"),v.Inertia.visit(window.location.href)},onError:j=>{c.error(j||"Une erreur est survenue.")}})};return x.useEffect(()=>{n.success&&c.success(n.success),n.error&&c.error(n.error)},[n]),e.jsxs(y,{children:[e.jsx(g,{title:`Network - ${s.username}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold mb-4 text-[#cd8b76]",children:["Réseau de ",s.username]}),e.jsx("p",{className:"text-gray-700",children:"Voici l'arbre généalogique de votre réseau :"}),s.role!=="admin"&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Distinction actuelle"}),a&&a.length>0?e.jsx("div",{children:e.jsxs("p",{children:["Distinction actuelle :"," ",e.jsx("span",{className:`inline-block px-2 py-1 rounded ${o(a[0].name)}`,children:a[0].name})]})}):e.jsx("p",{children:"Aucune distinction actuelle."}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Prochaine Distinction"}),r?e.jsxs("div",{children:[e.jsxs("p",{children:["Prochaine distinction :"," ",e.jsx("span",{className:`inline-block px-2 py-1 rounded ${o(r.name)}`,children:r.name})]}),e.jsx("p",{className:`text-${d?"green":"red"}-600`,children:d?"Éligible":"Non éligible"}),e.jsx(f,{onClick:()=>u(s.id),disabled:!d,children:"Upgrade"})]}):e.jsx("p",{children:"Aucune distinction disponible."})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Généalogie"}),l&&l.length>0?l.map(t=>e.jsx(m,{user:t},t.id)):e.jsx("p",{children:"Aucune downline disponible"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Gains"}),i&&i.data&&i.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full mt-4 table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-2 px-4 text-left",children:"Montant des gains"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Nom du filleul"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Date du gain"})]})}),e.jsx("tbody",{children:i.data.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"py-2 px-4",children:[t.gain_amount," ",N.name]}),e.jsx("td",{className:"py-2 px-4",children:t.buyer.username}),e.jsx("td",{className:"py-2 px-4",children:w(new Date(t.created_at),"dd MMM yyyy, HH:mm")})]},t.id))})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[i.prev_page_url&&e.jsx("a",{href:i.prev_page_url,className:"px-4 py-2 bg-gray-300 text-black rounded-md",children:"Précédent"}),i.next_page_url&&e.jsx("a",{href:i.next_page_url,className:"px-4 py-2 bg-gray-300 text-black rounded-md",children:"Suivant"})]})]}):e.jsx("p",{children:"Aucun gain disponible"})]})]})})})]})}export{R as default};
