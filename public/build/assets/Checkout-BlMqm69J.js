import{q as b,r as m,j as e,Y as D,a as k,y as q}from"./app-CU81j7nS.js";import{A as w}from"./AuthenticatedLayout-dRBKfQCh.js";import{P as E}from"./PrimaryButton-B91Wo0_j.js";import{n as i}from"./index-CRzonMBn.js";import"./ApplicationLogo-CKQckDiy.js";import"./transition-CyRQxhFf.js";import"./SecondaryButton-BoGYldyN.js";function V({product:t,paymentMethods:N,productType:n}){var f;const{auth:c}=b().props,{flash:h}=b().props,o="I-Coin",{message:p,error:j}=h||{};m.useEffect(()=>{p&&i.success(p),j&&i.error(j)},[h]);const[x,g]=m.useState(null),[s,y]=m.useState({first_name:c.user.first_name||"",last_name:c.user.last_name||"",username:c.user.username||"",email:c.user.email||"",country:((f=c.user.country)==null?void 0:f.name)||"",city:"",address:""}),[v,_]=m.useState(!1);m.useEffect(()=>{const a=s.first_name&&s.last_name&&s.username&&s.email&&s.country&&s.city&&s.address&&x;_(a)},[s,x]);const C=a=>{const u={productType:n,productId:a,paymentMethod:String(x),billingDetails:s};q.post("/checkout/process",u,{onSuccess:r=>{var d;(d=r.props.flash)!=null&&d.success&&(i.success(r.props.flash.success),setTimeout(()=>{i("Redirection en cours..."),setTimeout(()=>{n==="course"?window.location.href=route("courses.index"):n==="bot"&&(window.location.href=route("bots.index"))},1500)},1e3))},onError:r=>{var d;r&&((d=r.flash)!=null&&d.error)?i.error(r.flash.error):Object.values(r).forEach(P=>{i.error(P)})}})},l=a=>{const{name:u,value:r}=a.target;y({...s,[u]:r})};return e.jsxs(w,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Checkout"}),children:[e.jsx(D,{title:"Checkout"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"border-b border-gray-300 pb-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Détails du Produit"}),e.jsx("p",{className:"text-gray-700 mt-2",children:t.name}),e.jsx("p",{className:"text-gray-700 mt-2",children:t.description}),e.jsxs("div",{className:"flex space-x-4 items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-black",children:["Prix en dollars:"," ",e.jsxs("strong",{className:"text-xl font-bold text-[#82b170]",children:["$",t.price_usd]})]}),e.jsx("span",{children:"|"}),e.jsxs("span",{className:"text-sm text-black",children:["Prix en ",o,":"," ",e.jsx("strong",{className:"text-xl font-bold text-[#82b170]",children:t.price_i_coin})," ",o]})]})]}),n==="bot"&&e.jsxs("div",{className:"border-b border-gray-300 pb-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Détails du Bot"}),e.jsxs("p",{className:"text-gray-700 mt-2",children:["Taux de profit quotidien:"," ",e.jsxs("strong",{className:"text-[#82b170]",children:[t.daily_profit_percentage,"%"]})]}),e.jsxs("p",{className:"text-gray-700 mt-2",children:["Durée du profit:"," ",e.jsxs("strong",{className:"text-[#82b170]",children:[t.profit_duration_days," jours"]})]}),e.jsxs("p",{className:"text-gray-700 mt-2",children:["Dépôt minimum en USD:"," ",e.jsxs("strong",{className:"text-[#82b170]",children:["$",t.minimum_deposit_usd]})]}),e.jsxs("p",{className:"text-gray-700 mt-2",children:["Dépôt minimum en ",o,":"," ",e.jsxs("strong",{className:"text-[#82b170]",children:[t.minimum_deposit_icoin," ",o]})]})]}),e.jsxs("div",{className:"border-b border-gray-300 pb-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Détails de Facturation"}),e.jsxs("form",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Prénom"}),e.jsx("input",{type:"text",name:"first_name",value:s.first_name,onChange:l,className:"border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Nom"}),e.jsx("input",{type:"text",name:"last_name",value:s.last_name,onChange:l,className:"border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Nom d'utilisateur"}),e.jsx("input",{type:"text",name:"username",value:s.username,onChange:l,className:"border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,className:"border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Pays"}),e.jsx("input",{type:"text",name:"country",value:s.country,onChange:l,className:"border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Ville"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:l,className:"border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-gray-600",children:"Adresse"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:l,className:"border p-2 rounded",required:!0})]})]})]}),e.jsxs("div",{className:"border-b border-gray-300 pb-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Méthode de Paiement"}),e.jsx("div",{className:"mt-4 space-y-2",children:N.map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:`payment-method-${a.id}`,name:"payment_method",value:a.id,onChange:()=>g(a.id),className:"mr-2"}),e.jsxs("label",{htmlFor:`payment-method-${a.id}`,className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-gray-700",children:[a.name," -"," ",a.description]}),e.jsx("span",{className:`p-1 px-2 rounded-full text-xs ${a.is_active?"bg-green-200":"bg-red-200"}`,children:a.is_active?"Actif":"Inactif"})]})]},a.id))})]}),e.jsxs("div",{className:"mt-6 flex justify-between align-middle space-x-4",children:[e.jsx(k,{href:n==="bot"?"/bots":"/courses",className:"text-sm underline text-gray-600 hover:text-gray-900",children:"Annuler"}),e.jsx(E,{onClick:()=>C(t.id),disabled:!v,children:"Payer"})]})]})})})]})}export{V as default};
