import{r as x,W as b,j as e,Y as g}from"./app-CU81j7nS.js";import{A as y,m as N}from"./AuthenticatedLayout-dRBKfQCh.js";import{P as f}from"./PrimaryButton-B91Wo0_j.js";import{n as c}from"./index-CRzonMBn.js";import{d as v}from"./index-W5QgHgs8.js";import{f as w}from"./format-Gq6E87kO.js";import"./ApplicationLogo-CKQckDiy.js";import"./transition-CyRQxhFf.js";import"./SecondaryButton-BoGYldyN.js";import"./en-US-DckgOUrT.js";const o=s=>{if(!s)return"bg-gray-100 text-gray-600 border-gray-300";switch(s){case"Gold":return"bg-yellow-100 text-yellow-800 border-yellow-400";case"Silver":return"bg-gray-200 text-gray-700 border-gray-400";case"Bronze":return"bg-orange-200 text-orange-800 border-orange-400";default:return"bg-gray-100 text-gray-600 border-gray-300"}},m=({user:s,level:i=0})=>!s||typeof s!="object"?(console.error("Invalid user object:",s),e.jsx("span",{className:"text-red-500",children:"Données utilisateur invalides"})):e.jsxs("div",{className:"ml-4 border-l pl-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:`text-lg font-semibold ${i===0?"text-[#cd8b76]":"text-gray-700"}`,children:s.username||"Nom d'utilisateur inconnu"}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Distinction :"," ",s.distinction&&s.distinction!=="Aucune distinction"?e.jsx("span",{className:`inline-block px-2 py-1 rounded ${o(s.distinction)}`,children:s.distinction}):e.jsx("span",{children:"Aucune distinction"})]})]}),s.downlines&&Array.isArray(s.downlines)&&s.downlines.length>0?s.downlines.map(n=>e.jsx(m,{user:n,level:i+1},n.id||`${i}-${n.username||"unknown"}`)):e.jsx("span",{children:"Aucune downline"})]});function I({user:s,downlines:i,nextDistinction:n,isEligible:h,flash:a,userDistinctions:l,sponsorGains:r}){const[d,A]=x.useState(h),{post:u,processing:k,errors:_}=b();console.log(r);const p=t=>{u(`/network/verify-distinction/${t}`,{onSuccess:()=>{c.success("Distinction mise à jour avec succès !"),v.Inertia.visit(window.location.href)},onError:j=>{c.error(j||"Une erreur est survenue.")}})};return x.useEffect(()=>{a.success&&c.success(a.success),a.error&&c.error(a.error)},[a]),e.jsxs(y,{children:[e.jsx(g,{title:`Network - ${s.username}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold mb-4 text-[#cd8b76]",children:["Réseau de ",s.username]}),e.jsx("p",{className:"text-gray-700",children:"Voici l'arbre généalogique de votre réseau :"}),s.role!=="admin"&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Distinction actuelle"}),l&&l.length>0?e.jsx("div",{children:e.jsxs("p",{children:["Distinction actuelle :"," ",e.jsx("span",{className:`inline-block px-2 py-1 rounded ${o(l[0].name)}`,children:l[0].name})]})}):e.jsx("p",{children:"Aucune distinction actuelle."}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Prochaine Distinction"}),n?e.jsxs("div",{children:[e.jsxs("p",{children:["Prochaine distinction :"," ",e.jsx("span",{className:`inline-block px-2 py-1 rounded ${o(n.name)}`,children:n.name})]}),e.jsx("p",{className:`text-${d?"green":"red"}-600`,children:d?"Éligible":"Non éligible"}),e.jsx(f,{onClick:()=>p(s.id),disabled:!d,children:"Upgrade"})]}):e.jsx("p",{children:"Aucune distinction disponible."})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Généalogie"}),i&&Array.isArray(i)&&i.length>0?i.map(t=>e.jsx(m,{user:t},t.id||t.username||"unknown")):e.jsx("p",{children:"Aucune downline disponible"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Gains"}),r&&r.data&&r.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full mt-4 table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-2 px-4 text-left",children:"Montant des gains"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Nom du filleul"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Date du gain"})]})}),e.jsx("tbody",{children:r.data.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"py-2 px-4",children:[t.gain_amount," ",N.name]}),e.jsx("td",{className:"py-2 px-4",children:t.buyer?t.buyer.username:"Utilisateur inconnu"}),e.jsx("td",{className:"py-2 px-4",children:w(new Date(t.created_at),"dd MMM yyyy, HH:mm")})]},t.id))})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[r.prev_page_url&&e.jsx("a",{href:r.prev_page_url,className:"px-4 py-2 bg-gray-300 text-black rounded-md",children:"Précédent"}),r.next_page_url&&e.jsx("a",{href:r.next_page_url,className:"px-4 py-2 bg-gray-300 text-black rounded-md",children:"Suivant"})]})]}):e.jsx("p",{children:"Aucun gain disponible"})]})]})})})]})}export{I as default};
