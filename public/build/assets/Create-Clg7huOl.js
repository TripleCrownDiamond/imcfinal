import{q as v,W as f,r as j,j as e,Y as g,a as N}from"./app-CU81j7nS.js";import{A as y}from"./AuthenticatedLayout-dRBKfQCh.js";import{P as k}from"./PrimaryButton-B91Wo0_j.js";import{n as c}from"./index-CRzonMBn.js";import"./ApplicationLogo-CKQckDiy.js";import"./transition-CyRQxhFf.js";import"./SecondaryButton-BoGYldyN.js";function E(){v().props;const m="I-Coin",{data:a,setData:d,post:u,reset:p,errors:i}=f({name:"",description:"",price_usd:"",price_i_coin:"",number_of_videos:0,video_links:[],files:[]}),[l,n]=j.useState(0),h=r=>{r.preventDefault();const s=new FormData;s.append("name",a.name),s.append("description",a.description),s.append("price_usd",a.price_usd),s.append("price_i_coin",a.price_i_coin),s.append("number_of_videos",a.number_of_videos),a.video_links.forEach((t,o)=>{s.append(`video_links[${o}]`,t)});for(let t=0;t<a.files.length;t++)s.append("files[]",a.files[t]);u("/courses",{data:s,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{c.success("Cours ajouté avec succès !"),p(),n(0)},onError:t=>{Object.values(t).forEach(o=>{c.error(o)})}})},x=r=>{d("files",r.target.files)},b=r=>{const s=r.target.value;n(s),d("number_of_videos",s)},_=()=>Array.from({length:l},(r,s)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-700",htmlFor:`video_link_${s}`,children:["Lien de la Vidéo ",s+1]}),e.jsx("input",{type:"text",id:`video_link_${s}`,onChange:t=>{const o=[...a.video_links];o[s]=t.target.value,d("video_links",o)},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]},s));return e.jsxs(y,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Ajouter une Formation"}),children:[e.jsx(g,{title:"Ajouter un Cours"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"name",children:"Nom de la Formation"}),e.jsx("input",{type:"text",id:"name",value:a.name,onChange:r=>d("name",r.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0}),i.name&&e.jsx("div",{className:"text-red-500",children:i.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:a.description,onChange:r=>d("description",r.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0}),i.description&&e.jsx("div",{className:"text-red-500",children:i.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"price_usd",children:"Prix en USD"}),e.jsx("input",{type:"number",id:"price_usd",value:a.price_usd,onChange:r=>d("price_usd",r.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0}),i.price_usd&&e.jsx("div",{className:"text-red-500",children:i.price_usd})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-700",htmlFor:"price_i_coin",children:["Prix en ",m]}),e.jsx("input",{type:"number",id:"price_i_coin",value:a.price_i_coin,onChange:r=>d("price_i_coin",r.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0}),i.price_i_coin&&e.jsx("div",{className:"text-red-500",children:i.price_i_coin})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"number_of_videos",children:"Nombre de Vidéos"}),e.jsx("input",{type:"number",id:"number_of_videos",value:l,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",min:"0",required:!0}),i.number_of_videos&&e.jsx("div",{className:"text-red-500",children:i.number_of_videos})]}),_(),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"files",children:"Télécharger des fichiers (multiples, non vidéos)"}),e.jsx("input",{type:"file",id:"files",onChange:x,multiple:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",accept:".pdf,.doc,.docx,.ppt,.pptx,.txt"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{href:"/courses",className:"text-gray-600 hover:text-gray-800 underline",children:"Annuler"}),e.jsx(k,{type:"submit",children:"Ajouter le Cours"})]})]})})})})})]})}export{E as default};
