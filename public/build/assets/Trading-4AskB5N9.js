import{q as b,W as y,r as v,j as e,Y as w,a as D}from"./app-CU81j7nS.js";import{A as _,m as q}from"./AuthenticatedLayout-dRBKfQCh.js";import{P as E}from"./PrimaryButton-B91Wo0_j.js";import{_ as i}from"./index-CRzonMBn.js";import"./ApplicationLogo-CKQckDiy.js";import"./transition-CyRQxhFf.js";import"./SecondaryButton-BoGYldyN.js";function R({bot:a,minimum_deposit:c,isActiveSubscription:m,subscription_id:x,tradingDeposits:d,role:u}){const n=q.name,{flash:s}=b().props,{data:o,setData:h,post:p,processing:j,reset:f}=y({amount:c});v.useEffect(()=>{s!=null&&s.success&&i.success(s.success),s!=null&&s.error&&i.error(s.error)},[s]);const N=t=>{t.preventDefault(),p(route("trading.deposit",{id:x}),{data:{amount:o.amount},onSuccess:r=>{console.log("Réponse du serveur (Succès) :",r),r.success&&i.success(r.success),f()},onError:r=>{console.error("Réponse du serveur (Erreur) :",r),r.error?i.error(r.error):i.error("Une erreur est survenue lors du dépôt.")}})};return e.jsxs(_,{children:[e.jsx(w,{title:`Trading - ${a.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4 text-[#cd8b76]",children:a.name}),e.jsx("p",{className:"text-gray-700",children:a.description}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#82b170]",children:"Détails du Trading"}),e.jsxs("p",{children:["Profit quotidien: ",a.daily_profit_percentage,"%"]}),e.jsxs("p",{children:["Durée de profit: ",a.profit_duration_days," ","jours"]})]}),m||u==="admin"?e.jsxs("div",{className:"mt-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Dépôt minimum requis : ",c," ",n]}),e.jsxs("form",{onSubmit:N,className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Montant du dépôt (en ",n,")"]}),e.jsx("input",{type:"number",min:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:`Minimum ${c}`,value:o.amount,onChange:t=>h("amount",t.target.value)}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(D,{href:"/bots",className:"text-sm text-gray-500 hover:underline",children:"Annuler"}),e.jsx(E,{disabled:j,children:"Déposer"})]})]})]}):e.jsx("p",{className:"mt-4 text-red-500",children:"Votre abonnement a expiré. Veuillez renouveler votre abonnement pour continuer."}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#82b170]",children:"Gains liés aux dépôts"}),d.data.length>0?e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Uniq ID"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Montant du Dépôt"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Total des Gains"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Détails des Gains"})]})}),e.jsx("tbody",{children:d.data.map(t=>{const r=t.gains.reduce((l,g)=>l+parseFloat(g.gain_amount),0);return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.uniq_id.slice(0,8)+"..."}),e.jsxs("td",{className:"px-4 py-2",children:[t.amount," ",n]}),e.jsxs("td",{className:"px-4 py-2",children:[r," ",n]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("ul",{children:t.gains.map(l=>e.jsxs("li",{children:[l.gain_amount," ",n," ","obtenu le"," ",new Date(l.created_at).toLocaleString()]},l.id))})})]},t.id)})})]}):e.jsx("p",{children:"Aucun dépôt trouvé."})]})]})})})]})}export{R as default};
