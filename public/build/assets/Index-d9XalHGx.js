import{W as g,q as y,r as a,j as e,Y as N,a as b}from"./app-CU81j7nS.js";import{A as d}from"./AuthenticatedLayout-dRBKfQCh.js";import{P as v}from"./PrimaryButton-B91Wo0_j.js";import{c as w}from"./index-SmABpfec.js";import{n as i}from"./index-CRzonMBn.js";import"./index-W5QgHgs8.js";import{f as _,a as A}from"./fr-Dz8sqj0j.js";import"./ApplicationLogo-CKQckDiy.js";import"./transition-CyRQxhFf.js";import"./SecondaryButton-BoGYldyN.js";import"./iconBase-KsH1_KL1.js";import"./en-US-DckgOUrT.js";function q({auth:m}){const{post:x,processing:E}=g(),{flash:r}=y().props,[l,u]=a.useState([]),[n,p]=a.useState({}),[h,c]=a.useState(!0);a.useEffect(()=>{r!=null&&r.success&&i.success(r.success),r!=null&&r.error&&i.error(r.error)},[r]),a.useEffect(()=>{o(1)},[]);const o=s=>{c(!0),fetch(`/api/users?page=${s}`).then(t=>t.json()).then(t=>{u(t.data),p(t.meta)}).catch(()=>{i.error("Erreur lors du chargement des utilisateurs.")}).finally(()=>{c(!1)})},f=s=>{window.confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?")&&(c(!0),x(route("users.destroy",s),{onSuccess:()=>{i.success("Utilisateur supprimé avec succès."),o(n.current_page)},onError:()=>{i.error("Une erreur s'est produite lors de la suppression.")},onFinish:()=>{c(!1)}}))},j=s=>{o(s)};return m.user.role!=="admin"?e.jsx(d,{children:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Accès interdit"}),e.jsx("p",{className:"text-gray-600",children:"Vous n'avez pas les autorisations nécessaires pour accéder à cette page."})]})}):e.jsxs(d,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:"Liste des utilisateurs"}),children:[e.jsx(N,{title:"Liste des utilisateurs"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:h?e.jsx("p",{className:"text-center text-gray-500",children:"Chargement..."}):l.length===0?e.jsx("p",{className:"text-gray-500 text-center",children:"Aucun utilisateur trouvé."}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{children:l.map(s=>e.jsxs("li",{className:"flex justify-between items-center border-b py-4 hover:bg-gray-100 transition duration-200",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-800 font-semibold",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Inscrit"," ",_(new Date(s.created_at),{locale:A,addSuffix:!0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"text-sm",children:e.jsx(b,{href:route("users.show",s.id),children:"Voir"})}),e.jsxs("a",{href:"#",onClick:t=>{t.preventDefault(),f(s.id)},className:"flex items-center space-x-1 text-red-600 transition",children:[e.jsx(w,{}),e.jsx("span",{children:"Supprimer"})]})]})]},s.id))}),e.jsx("div",{className:"mt-6 flex justify-center",children:[...Array(n.last_page)].map((s,t)=>e.jsx("button",{onClick:()=>j(t+1),className:`px-3 py-1 mx-1 rounded ${n.current_page===t+1?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"}`,children:t+1},t))})]})})})})})]})}export{q as default};
